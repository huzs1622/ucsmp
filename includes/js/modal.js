jQuery.fn.modal=function(options){var defaults={opacity:.5,backgroundColor:'#000',scrollable:true,onClose:null,onShow:null,onStart:function(){},onFinish:function(){},};if(options){$.extend(defaults,options)}return this.each(function(){defaults.onStart.call(this);var $this=$(this);var $window=$(window);var mh=$this.height(),mw=$this.width(),ww=$window.width(),wh=$window.height(),vp=((wh/2)-(mh/2))+$window.scrollTop(),hp=(ww/2)-(mw/2);if(!defaults.scrollable){$('body').height(wh).css({overflow:'hidden'})}$('<div />').addClass('overlay').css({'backgroundColor':defaults.backgroundColor,opacity:defaults.opacity}).appendTo('body').on('click',function(){if(jQuery.isFunction(defaults.onClose)){defaults.onClose.call(this)}$(this).remove();$('.modal:visible').css({opacity:0,top:-999});$('.showModal.active').removeClass('active');$('body').css({height:'auto',overflow:'visible'})});if(jQuery.isFunction(defaults.onShow)){defaults.onShow.call(this)}else{$this.css({display:'block',left:hp,opacity:1,top:vp})}defaults.onFinish.call(this)})}